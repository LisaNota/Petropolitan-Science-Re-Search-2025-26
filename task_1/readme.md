# Задание 1 — Подсчёт количества уникальных IPv6-адресов в большом файле

Ключевая идея решения: **внешняя сортировка (external merge sort)** по каноническому бинарному представлению IPv6 (16 байт) и подсчёт уникальных на этапе финального **k-way merge**.

## 1) Описание алгоритма

1. **Нормализация IPv6**: каждая строка преобразуется в **packed-форму** (16 байт) через стандартную функцию `socket.inet_pton(AF_INET6, ...)`.  
   Это однозначное представление, эквивалентное канонической форме из условия (8 групп по 4 hex-цифры в нижнем регистре).

2. **Генерация runs (чанки)**:
   - вход читается потоково;
   - адреса копятся в памяти чанком фиксированного размера;
   - чанк сортируется и сохраняется во временный бинарный файл (run), где каждая запись ровно 16 байт.

3. **Многоступенчатое слияние runs**:
   - если runs слишком много, они сливаются партиями (ограничение по числу одновременно открытых файлов ОС);
   - получаются более крупные отсортированные runs.

4. **Подсчёт уникальных на финальном k-way merge**:
   - выполняется слияние оставшихся отсортированных runs через кучу (heap);
   - уникальные считаются сравнением текущего значения с предыдущим (в отсортированном потоке одинаковые значения идут подряд).

## 2) Сложность и ресурсы

- По времени: порядка **O(N log N)** из-за сортировок чанков и последующих слияний (внешняя сортировка).
- По памяти: зависит от размера чанка (в коде выставлены безопасные дефолты под ограничение ~1 ГБ).
- По диску: нужны временные файлы runs; объём временных данных сопоставим с объёмом входа (в бинарном виде: ~16 байт на строку + накладные расходы файловой системы).

## 3) Структура папки

- `main.py` — итоговое воспроизводимое решение.
- `solution.ipynb` — полный ход решения с пояснениями, проверками и промежуточными выводами.
- `alternatives.md` — рассмотренные варианты ускорения (распараллеливание, вероятностные методы, оптимизации).
- `input.txt` — входной файл (IPv6 по одному в строке).
- `output.txt` — файл с ответом (одно целое число).
- `test_cases/` — тест-кейс для проверки корректности (входы/ожидаемые ответы).
- `experiment_cases/` — набор экспериментальных кейсов для замеров/сравнений

## 4) Формат входных и выходных данных

### Вход (`input.txt`)
Текстовый файл, где **каждая строка** содержит **ровно один валидный IPv6-адрес**:
- полная или сокращённая запись (возможен `::`);
- ведущие нули могут присутствовать/отсутствовать;
- регистр латинских букв произвольный.

### Выход (`output.txt`)
Файл с **одним целым числом** — количеством уникальных IPv6-адресов во входном файле.

## 5) Быстрый запуск

Из папки `task_1/`:

```bash
python main.py input.txt output.txt
```

После выполнения в `output.txt` будет записан ответ.